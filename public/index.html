<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vNodes - Node Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Left Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h1>vNodes</h1>
            <p>Node-Based vMix Integration</p>
        </div>

        <!-- Node Palette -->
        <div class="sidebar-section">
            <h3 class="section-header collapsible">
                <span class="collapse-icon">â–¼</span>
                ğŸ“¥ Event Nodes
            </h3>
            <div class="node-palette">
                <button class="palette-node event-node" data-node-type="event" data-event-type="timeout_started">
                    â±ï¸ Timeout Started
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="timeout_over">
                    â±ï¸ Timeout Over
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="round_started">
                    ğŸ® Round Started
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="round_concluded">
                    ğŸ® Round Over
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="freeze_time_started">
                    â„ï¸ Freeze Time
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="freeze_time_over">
                    â„ï¸ Freeze Over
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="warmup_started">
                    ğŸ”¥ Warmup Started
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="warmup_over">
                    ğŸ”¥ Warmup Over
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="match_started">
                    ğŸ Match Started
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="gameover">
                    ğŸ Game Over
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="bomb_planted">
                    ğŸ’£ Bomb Planted
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="bomb_defused">
                    ğŸ’£ Bomb Defused
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="bomb_exploded">
                    ğŸ’£ Bomb Exploded
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="player_died">
                    ğŸ’€ Player Died
                </button>
                <button class="palette-node event-node" data-node-type="event" data-event-type="player_spawned">
                    ğŸ‘¤ Player Spawned
                </button>
            </div>
        </div>

        <div class="sidebar-section">
            <h3 class="section-header collapsible">
                <span class="collapse-icon">â–¼</span>
                ğŸ¯ vMix Triggers
            </h3>
            <div class="node-palette">
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnTransitionIn">
                    â¡ï¸ On Transition In
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnTransitionOut">
                    â¬…ï¸ On Transition Out
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnPreviewIn">
                    ğŸ‘ï¸ On Preview In
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnPreviewOut">
                    ğŸš« On Preview Out
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay1In">
                    ğŸ”· Overlay 1 In
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay1Out">
                    ğŸ”· Overlay 1 Out
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay2In">
                    ğŸ”¶ Overlay 2 In
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay2Out">
                    ğŸ”¶ Overlay 2 Out
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay3In">
                    ğŸ”¸ Overlay 3 In
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay3Out">
                    ğŸ”¸ Overlay 3 Out
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay4In">
                    ğŸ”¹ Overlay 4 In
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnOverlay4Out">
                    ğŸ”¹ Overlay 4 Out
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnRecordingStart">
                    ğŸ”´ Recording Start
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnRecordingStop">
                    â¹ï¸ Recording Stop
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnStreamingStart">
                    ğŸ“¡ Streaming Start
                </button>
                <button class="palette-node vmix-trigger-node" data-node-type="vmix-trigger" data-trigger-type="OnStreamingStop">
                    ğŸ“¡ Streaming Stop
                </button>
            </div>
        </div>

        <div class="sidebar-section">
            <h3 class="section-header collapsible">
                <span class="collapse-icon">â–¼</span>
                ğŸ“¤ vMix Actions
            </h3>
            <div class="node-palette">
                <button class="palette-node action-node" data-node-type="action">
                    ğŸ¬ New vMix Action
                </button>
            </div>
        </div>

        <div class="sidebar-section">
            <h3 class="section-header collapsible">
                <span class="collapse-icon">â–¼</span>
                ğŸ“¦ Organization
            </h3>
            <div class="node-palette">
                <button class="palette-node group-node" id="createGroupBtn">
                    ğŸ“¦ Create Group
                </button>
            </div>
        </div>

        <!-- Presets -->
        <div class="sidebar-section">
            <h3 class="section-header collapsible">
                <span class="collapse-icon">â–¼</span>
                ğŸ’¾ Presets
            </h3>
            <div class="preset-controls">
                <input type="text" id="presetName" placeholder="Preset name..." />
                <button id="savePreset" class="btn-primary">Save</button>
                <button id="clearWorkflow" class="btn-danger">Clear All</button>
            </div>
            <div id="presetList" class="preset-list"></div>
        </div>

        <!-- Status -->
        <div class="sidebar-section">
            <h3 class="section-header collapsible">
                <span class="collapse-icon">â–¼</span>
                ğŸ“Š Status
            </h3>
            <div class="status-info">
                <div class="status-item">
                    <span>Nodes:</span>
                    <span id="nodeCount">0</span>
                </div>
                <div class="status-item">
                    <span>Connections:</span>
                    <span id="connectionCount">0</span>
                </div>
                <div class="status-item">
                    <span>Groups:</span>
                    <span id="groupCount">0</span>
                </div>
                <div class="status-item">
                    <span>vMix:</span>
                    <span id="vmixStatus">âš ï¸ Unknown</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Canvas Area -->
    <div class="main-area">
        <div class="toolbar">
            <button id="zoomIn" class="toolbar-btn">ğŸ”+</button>
            <button id="zoomOut" class="toolbar-btn">ğŸ”-</button>
            <button id="resetZoom" class="toolbar-btn">âš–ï¸ Reset</button>
            <button id="centerView" class="toolbar-btn">ğŸ¯ Center</button>
            <div style="width: 1px; height: 24px; background: var(--border-color); margin: 0 8px;"></div>
            <button id="createGroupToolbar" class="toolbar-btn">ğŸ“¦ Create Group</button>
            <div style="width: 1px; height: 24px; background: var(--border-color); margin: 0 8px;"></div>
            <span class="keyboard-shortcuts">
                <span class="shortcut-item"><kbd>Alt</kbd> + Drag = Duplicate</span>
                <span class="shortcut-item"><kbd>Ctrl</kbd> + Click = Multi-Select</span>
                <span class="shortcut-item"><kbd>Ctrl</kbd> + <kbd>G</kbd> = Group Selected</span>
                <span class="shortcut-item"><kbd>Del</kbd> = Delete</span>
                <span class="shortcut-item"><kbd>Ctrl</kbd> + <kbd>Z</kbd> = Undo</span>
            </span>
            <span class="toolbar-info">
                <span id="zoomLevel">100%</span> | 
                <span id="panInfo">Pan: 0, 0</span>
            </span>
        </div>
        
        <div id="canvas-container">
            <svg id="canvas" width="100%" height="100%">
                <!-- Grid pattern -->
                <defs>
                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                        <rect width="40" height="40" fill="none" stroke="#2a2a2a" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#grid)" />
                
                <!-- Connections group -->
                <g id="connections"></g>
            </svg>
            
            <!-- Nodes container -->
            <div id="nodes-container"></div>
        </div>
    </div>

    <!-- Node Configuration Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Configure Node</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
            <div class="modal-footer">
                <button id="testNode" class="btn-test">ğŸ§ª Test Node</button>
                <button id="deleteNode" class="btn-danger">ğŸ—‘ï¸ Delete</button>
                <button id="saveConfig" class="btn-primary">ğŸ’¾ Save</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
